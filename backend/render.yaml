# Render.com deployment configuration
# Deploy: https://render.com/docs/deploy-from-repo
#
# QUICK DEPLOY:
# 1. Push this repo to GitHub
# 2. Go to https://dashboard.render.com/new/blueprint
# 3. Connect your GitHub repo
# 4. Render will auto-detect this file
# 5. Set REQUIRED env vars in Render dashboard before deploy:
#    - ELEVENLABS_API_KEY (get from https://elevenlabs.io)
#    - XAI_API_KEY (get from https://console.x.ai) [optional but recommended]
# 6. Deploy -> Get your https://<name>.onrender.com URL
# 7. Set that URL in Unity AppConfig._productionUrl
#
# TEST: curl https://<name>.onrender.com/api/health

services:
  - type: web
    name: shadowing-tutor-backend
    runtime: node
    region: oregon  # or singapore for Asia-Pacific users
    plan: free      # or starter ($7/mo) for always-on, better latency
    rootDir: backend
    buildCommand: npm ci
    startCommand: node index.js
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      - key: MODE
        value: REAL  # Use real APIs, not stubs
      - key: PORT
        value: 10000  # Render uses 10000 by default
      - key: ELEVENLABS_API_KEY
        sync: false  # REQUIRED - Set manually in dashboard
      - key: XAI_API_KEY
        sync: false  # Optional - Set for Grok feedback
      - key: BACKEND_TOKEN
        sync: false  # Optional - Set for API auth (Unity must send header)
